@using OpenShock.Sentry.Logging
@using OpenShock.Sentry.Services
@inject ISnackbar Snackbar
@inherits LayoutComponentBase
@inject AuthService AuthService
@inject NavigationManager NavigationManager

<style>
    .childs-width-100 > * {
        width: 100%;
    }
    
</style>

<MudLayout>
    <div class="d-flex" style="width: 100vw; height: 100vh">

        <SideBar/>
        
        <MudDivider Vertical="true" FlexItem="true"/>

        <div Style="width: 100%; height: 100%; overflow-y: auto; overflow-x: hidden" Class="pa-6">
            @Body
        </div>
    </div>
</MudLayout>

@code {
    
    
    private void MsgNoty(string msg, Severity severity)
    {
        Snackbar.Add(msg, severity);
    }

    protected override void OnInitialized()
    {
        if (!AuthService.Authenticated)
        {
            NavigationManager.NavigateTo("/", true, true);
            return;
        }
        
        UiLogSink.NotificationAction = MsgNoty;
    }

}